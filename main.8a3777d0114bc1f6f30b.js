webpackJsonp([1],{"./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/index.scss":function(e,t,n){t=e.exports=n("./node_modules/css-loader/lib/css-base.js")(void 0),t.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Raleway:100,200,300);",""]),t.i(n("./node_modules/css-loader/index.js!./node_modules/platformicons/platformicons/platformicons.css"),""),t.i(n("./node_modules/css-loader/index.js!./node_modules/typeface-rubik/index.css"),""),t.push([e.i,'.platform-icon:before{height:50px;width:50px;font-family:platformicons;color:#fff;font-size:32px;-webkit-font-smoothing:antialiased;display:block;height:100%;border-radius:3px 0 0 3px;text-align:center;line-height:48px}.c:before{content:"C";font-family:Raleway;font-weight:300;background:#a9b9cb;line-height:50px}.cocoa:before{content:"\\E60A";background:red}.csharp:before{content:"\\E60F";background:#0090ff}.elixir:before{content:"\\E903";background:#4e3fb4}.go:before{content:"\\E606";background:#fff;color:#000}.java:before{content:"\\E608";background:#ff8a00}.javascript:before{content:"\\E600";background:#ffd906}.node:before{content:"\\E609";background:#8ac655}.objc:before{content:"\\E60E";background:#02bfd0}.php:before{content:"\\E601";background:#4f5b93}.python:before{content:"\\E602";background:#3776ab}.ruby:before{content:"\\E604";background:#d00202}.perl:before{content:"\\E901";background:#9d95a4}.other:before{content:"\\E60A";background:#afafaf}#root,body,html{height:100%}#root,#sentry_echo,body{min-height:100%;margin:0;padding:0}body{background:#15121c;color:#fff;font-family:Rubik;font-weight:300}#sentry_echo,header{display:flex;flex-direction:column}header{flex-grow:0;padding:20px 0;text-align:center}header p{padding-top:25px;width:570px;line-height:1.9em;margin:0 auto;font-size:.9rem;color:#fff;animation:flavorText 10s linear 1 forwards}@keyframes flavorText{50%{opacity:1}to{opacity:.25}}.logo{display:flex;font-family:Raleway;margin:0 auto}.logo h1:first-child{width:200px;height:70px;background:url("https://sentry-brand.storage.googleapis.com/sentry-logo-white.svg") no-repeat;text-indent:-9999px}.logo h1:last-child{font-weight:100;text-transform:lowercase;line-height:68px;position:relative}.main-app{position:relative;flex-grow:1;display:flex;justify-content:center;padding-top:80px}.sequencers{list-style:none;margin:0;padding:0}.sequencers li:not(:last-child){margin-bottom:8px}.platform{display:flex;width:800px}.instrument-heading{display:flex;text-transform:uppercase;font-size:.8rem;align-items:center;padding:4px 0;user-select:none}.instrument-heading:after{content:"";border-bottom:1px solid #333;flex-grow:1;margin-left:10px}.note-indicator{display:block;width:4px;background:#353042;margin-left:6px}.note-indicator.triggered{animation:noteIndicatorTrigger .3s}@keyframes noteIndicatorTrigger{20%{background:#e03e2f}}.sequence-timeline{overflow:hidden;position:relative;margin-left:6px;background:hsla(0,0%,100%,.01);flex-grow:1}.sequence-timeline svg{display:block;shape-rendering:crispEdges}.sequence-timeline svg .bar-lines line{stroke-width:1px;stroke:#2a2140}.playhead{top:0;left:0;border-right:1px solid #6c5fc7;transform:translateX(0);opacity:0;transition:opacity .1s;z-index:2}.playhead,.playhead:before{position:absolute;height:100%}.playhead:before{content:"";display:block;width:10px;left:-10px;background:linear-gradient(90deg,rgba(108,95,199,0),rgba(108,95,199,.2))}.playhead.shown{opacity:1}.bpm-indicator{position:absolute;top:10px;font-weight:400;font-size:1.2rem;line-height:1.2rem;text-align:center;color:#f58159;transition:opacity .6s,transform .6s;opacity:0;transform:translateY(47px);pointer-events:none}.bpm-indicator.ready{opacity:1;transform:translateY(0)}.bpm-indicator div,.bpm-indicator small{color:#fff;font-weight:100}.bpm-indicator small{font-size:.65rem;margin-left:2px}.bpm-indicator div{font-size:.8rem;opacity:.6}.loading-sequence{position:absolute;top:20px;background:#e03e2f;font-size:.8rem;padding:5px 10px;border-radius:3px;animation:waitNotify 1s;transition:opacity .6s}.loading-sequence.ready{opacity:0;pointer-events:none}@keyframes waitNotify{0%{opacity:0}60%{opacity:0}to{opacity:1}}',""])},"./src/App.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],o=!0,a=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw r}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=n("./node_modules/react/index.js"),c=o(d),u=n("./node_modules/tone/build/Tone.js"),f=o(u),p=n("./node_modules/classnames/index.js"),h=o(p),m=n("./node_modules/animejs/anime.min.js"),g=o(m),b=n("./node_modules/react-animated-number/build/index.js"),y=o(b),v=n("./node_modules/lodash/lodash.js"),x=o(v);n("./src/index.scss");var w=["javascript","node","python","ruby","cocoa","csharp","elixir","go","java","objc","php","perl","c","other"];f.default.Transport.start("+1"),f.default.Transport.bpm.value=160,window.Tone=f.default;var k=["Lead Synth","Kick Drum","Bass Line"],E=[["javascript","node","python","ruby"],["go","csharp","elixir","php"],["java","objc","c","other"]],_=function(e){function t(){return a(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"makeBarGrid",value:function(){var e=this,t=new f.default.Time("1:0:0").div(this.props.sequenceSize).mult(this.props.width).toSeconds(),n=Math.floor(this.props.width/t);return x.default.times(n,function(n){return c.default.createElement("line",{key:n,x1:Math.floor(t*(n+1)),x2:Math.floor(t*(n+1)),y1:0,y2:e.props.height})})}},{key:"render",value:function(){return c.default.createElement("svg",{width:this.props.width,height:this.props.height},c.default.createElement("g",{className:"bar-lines"},this.makeBarGrid()))}}]),t}(d.Component),j=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={sequenceSize:new f.default.Time("4:0:0"),playheadShown:!1,playing:!1,countDivision:5,noteLength:"8n",quantizeTo:"8n"},e.timeline=null,e.playhead=null,e.setPlayhead=e.setPlayhead.bind(e),e.processEvents=e.processEvents.bind(e),e}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this.state.sequenceSize;new f.default.Loop(this.processEvents,this.state.sequenceSize).start(e)}},{key:"processEvents",value:function(e){var t=this;f.default.Draw.schedule(this.setPlayhead,e);var n=this.props.eventBuffer[this.props.platform].sort();this.props.eventBuffer[this.props.platform]=[];var o=n[0];n=n.map(function(e){return new f.default.Time((e-o)/1e3)}),n=n.map(function(e){return e.quantize(t.state.quantizeTo)}),n=n.filter(function(e){return e<t.state.sequenceSize}),n=Object.values(x.default.groupBy(n,function(e){return e.toSeconds()})).map(function(n){return{time:n[0].add(e),length:new f.default.Time(n.length/t.state.countDivision).mult(t.state.noteLength)}}),console.log(n)}},{key:"setPlayhead",value:function(){this.setState({playheadShown:!0,playing:!0}),this.playhead.style.transform="translateX(0)";var e=this.timeline.clientWidth;(0,g.default)({targets:this.playhead,duration:this.state.sequenceSize.toMilliseconds(),translateX:e,easing:"linear"})}},{key:"render",value:function(){var e=this;return c.default.createElement("li",{className:"platform"},c.default.createElement("span",{className:(0,h.default)("platform-icon",this.props.platform)}),c.default.createElement("span",{className:"note-indicator"}),c.default.createElement("div",{className:"sequence-timeline",ref:function(t){return e.timeline=t}},c.default.createElement("span",{className:(0,h.default)("playhead",{shown:this.state.playheadShown}),ref:function(t){return e.playhead=t}}),c.default.createElement(_,{sequenceSize:this.state.sequenceSize,width:734,height:48})))}}]),t}(d.Component),S=c.default.createElement("header",null,c.default.createElement("div",{className:"logo"},c.default.createElement("h1",null,"Sentry"),c.default.createElement("h1",null,"Echo")),c.default.createElement("p",null,"Listen the beautiful soundscape generated by software breaking around the world. Hear the sound of errors — Powered by sentry.io")),q=function(e){function t(){a(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={globalSequenceSize:new f.default.Time("4:0:0"),ordering:x.default.cloneDeep(E),bpmDivider:5,currentBpm:new Number(0),eventsPerSecond:new Number(0)},e.eventBuffer=x.default.fromPairs(w.map(function(e){return[e,[]]})),e.eventsPerSequence=0,e.starting=e.starting.bind(e),e.recomputeBpm=e.recomputeBpm.bind(e),e}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.props.eventStream.onmessage=this.processEvents.bind(this);var t=this.state.globalSequenceSize;f.default.Transport.schedule(function(t){return f.default.Draw.schedule(e.starting,t)},t),new f.default.Loop(this.recomputeBpm,this.state.globalSequenceSize).start(t)}},{key:"processEvents",value:function(e){var t=JSON.parse(e.data),n=s(t,4),o=(n[0],n[1],n[2]),a=n[3];void 0!==this.eventBuffer[a]&&(this.eventsPerSequence++,this.eventBuffer[a].push(o))}},{key:"starting",value:function(){this.setState({playing:!0})}},{key:"recomputeBpm",value:function(e){var t=this.eventsPerSequence;this.eventsPerSequence=0;var n=t/this.state.globalSequenceSize,o=n/this.state.bpmDivider;this.setState({eventsPerSecond:n,currentBpm:o}),f.default.Transport.bpm.setValueAtTime(o,e)}},{key:"render",value:function(){var e=this,t=this.state.ordering.map(function(t,n){return[c.default.createElement("li",{key:n,className:"instrument-heading"},k[n]),t.map(function(t){return c.default.createElement(j,{key:t,eventBuffer:e.eventBuffer,platform:t})})]}),n={ready:this.state.playing},o=c.default.createElement("span",{className:(0,h.default)("loading-sequence",n)},"Waiting ",this.state.globalSequenceSize.toSeconds().toFixed(1)+" ","seconds for first sequence of events..."),a=((0,h.default)("bpm-indicator",{ready:this.state.playing}),c.default.createElement("h1",{className:(0,h.default)("bpm-indicator",n)},c.default.createElement(y.default,{value:this.state.currentBpm,formatValue:function(e){return e.toFixed(2)},duration:600}),c.default.createElement("small",null,"BPM"),c.default.createElement("div",null,this.state.eventsPerSecond.toFixed(1)+" ","errors ∕ second ÷ ",this.state.bpmDivider)));return c.default.createElement("div",{id:"sentry_echo"},S,c.default.createElement("div",{className:"main-app"},o,a,c.default.createElement("ul",{className:"sequencers"},t)))}}]),t}(d.Component);t.default=q},"./src/index.js":function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var a=n("./node_modules/react/index.js"),r=o(a),i=n("./node_modules/react-dom/index.js"),s=o(i),l=n("./src/App.js"),d=o(l);n("./src/index.scss");var c=new EventSource("https://live.sentry.io:7000");s.default.render(r.default.createElement(d.default,{eventStream:c}),document.getElementById("root"))},"./src/index.scss":function(e,t,n){var o=n("./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/index.scss");"string"==typeof o&&(o=[[e.i,o,""]]);var a={hmr:!0};a.transform=void 0;var r=n("./node_modules/style-loader/lib/addStyles.js")(o,a);o.locals&&(e.exports=o.locals),o.locals||e.hot.accept("./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/index.scss",function(){var t=n("./node_modules/css-loader/index.js!./node_modules/sass-loader/lib/loader.js!./src/index.scss");"string"==typeof t&&(t=[[e.i,t,""]]),r(t)}),e.hot.dispose(function(){r()})}},["./src/index.js"]);
//# sourceMappingURL=main.8a3777d0114bc1f6f30b.js.map